</!DOCTYPE html>
<html>
  <head>
  <title></title>
  </head>
  <script type="text/javascript">

    var operand1 = "";
    var operation = "";
    var shouldClear= false;

    getDisplay = function() {
      return document.getElementById("display").value;
    };

    setDisplay = function(disp) {        
      document.getElementById("display").value = disp;      
    };


    clickNumber = function(num, f) {
      return function() { 
        if(f === undefined || f(getDisplay())){
          if (shouldClear){
            setDisplay("");
          }
          document.getElementById("display").value = `${getDisplay()}${num}`;
        }
      };
    };

    multiplyShortcut = function(e){
      x = e.keyCode;
      setDisplay(x);
      if (e.keyCode === 42) {
        clickMultiply();
      };
      if (e.keyCode === 47) {
        clickDivide();
      };

      if (e.keyCode === 43) {
        clickAdd();
      };

      if (e.keyCode === 45) {
        clickMinus();
      };
      if (e.keyCode === 45) {
        clickMinus();
      };
      if (e.keyCode === 48) {
        click0();
      };
      if (e.keyCode === 49) {
        click1();
      };
      if (e.keyCode === 50) {
        click2();
      };
      if (e.keyCode === 51) {
        click3();
      };
      if (e.keyCode === 52) {
        click4();
      };
      if (e.keyCode === 53) {
        click5();
      };
      if (e.keyCode === 54) {
        click6();
      };
      if (e.keyCode === 55) {
        click7();
      };
      if (e.keyCode === 56) {
        click8();
      };
      if (e.keyCode === 57) {
        click9();
      };
      if (e.keyCode === 13) {
        clickEquals();
      };
      if (e.keyCode === 46) {
        clickPeriod();
      };
    };



    window.click1 = clickNumber(1);
    window.click2 = clickNumber(2);
    window.click3 = clickNumber(3);
    window.click4 = clickNumber(4);
    window.click5 = clickNumber(5);
    window.click6 = clickNumber(6);
    window.click7 = clickNumber(7);
    window.click8 = clickNumber(8);
    window.click9 = clickNumber(9);
    window.click0 = clickNumber(0, function(str){
      return str !== "0";
    });
    window.clickPeriod = clickNumber(".", function(str){
      return !str.includes(".");
    });
    
    window.clickClear = function() {
      setDisplay("");
    };

    window.clickSquare = function() {
      var displayValue = parseFloat(getDisplay());

      setDisplay(displayValue * displayValue); 
    };

    clickOperation = function(op) {
      return function() {
        shouldClear = false;
        operand1 = parseFloat(getDisplay());
        operation = op ;

        setDisplay(""); 
      };
    };

    window.clickAdd = clickOperation("add"); 
    window.clickMultiply = clickOperation("multiply"); 
    window.clickDivide = clickOperation("divide"); 
    window.clickMinus = clickOperation("minus"); 

    window.clickEquals = function() {
      shouldClear = true;
      var displayValue = parseFloat(getDisplay());
      var operationObject = {
        add: function(x, y) {return x+y; }
      , minus: function(x, y) {return x-y; }
      , divide: function(x, y) {return x/y; }
      , multiply: function(x, y) {return x*y; }
      }
        
      setDisplay(operationObject[operation](operand1, displayValue));
      
    };
    document.addEventListener('keypress', multiplyShortcut);
  </script>
  <body>
    <input type="text" id="display" value="" readonly> <br>
    <br>
    <input type="button" value= "1" onclick="click1()">
    <input type="button" value= "2" onclick="click2()">
    <input type="button" value= "3" onclick="click3()">
    <input type="button" value= "Sqr" onclick="clickSquare()"> <br>
    <input type="button" value= "4" onclick="click4()">
    <input type="button" value= "5" onclick="click5()">
    <input type="button" value= "6" onclick="click6()">
    <input type="button" value= "+" onclick="clickAdd()">
    <input type="button" value= "*" onclick="clickMultiply()"><br>
    <input type="button" value= "7" onclick="click7()">
    <input type="button" value= "8" onclick="click8()">
    <input type="button" value= "9" onclick="click9()">
    <input type="button" value= "-" onclick="clickMinus()">
    <input type="button" value= "/" onclick="clickDivide()"><br>
    <input type="button" value= "0" onclick="click0()">
    <input type="button" value= "." onclick="clickPeriod()">
    <input type="button" value= "Clr" onclick="clickClear()"> <br>
    <input type="button" value= "=" onclick="clickEquals()">

  </body>
</html>